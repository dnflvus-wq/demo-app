# GENQ TC 생성 실험 Round 2 분석 보고서 (Instructions 튜닝 후)

> 실험 날짜: 2026-02-15
> 대상: DemoApp Todo 페이지 (Gold Standard 21개 TC)
> 변경: ai_prompt_tb prompt_id=2 Instructions 전면 개편

---

## 실험 조건 비교

| 항목 | Pre-Tuned (실험3) | Post-Tuned (실험3-T) |
|------|-------------------|---------------------|
| 프롬프트 | 상세 (15줄) | **동일** |
| URL | http://localhost:5174/todo | **동일** |
| 요청 TC 수 | 15 | **동일** |
| **Instructions** | 원본 (에러처리 30% 강제) | **튜닝 (필수커버+역행+반환각)** |
| 생성 시간 | 40.58s | **22.10s** (-45%) |
| qltyIndex | 4.20 | 4.20 (변화 없음) |
| trust | 4.19 | 4.24 (+0.05) |

> 생성 시간이 40.58s → 22.10s로 절반 가까이 단축됨 (원인 추정: 프롬프트 구조 변경으로 토큰 소모 감소)

---

## 1. 커버리지 분석 (Gold Standard 21개 대비)

### 매칭 테이블

| Gold Standard TC | Pre-Tuned | Post-Tuned | 변화 |
|------------------|:---------:|:----------:|:----:|
| TODO-001 Todo 추가 (전체 필드) | O | O | = |
| TODO-002 Todo 추가 (제목만) | O | X | - |
| TODO-003 완료 토글 | X | △ | **+** |
| TODO-004 완료 해제 | X | △ | **+** |
| TODO-005 Todo 수정 | O | O | = |
| TODO-006 수정 취소 | X | X | = |
| TODO-007 삭제 확인 | O | O | = |
| TODO-008 삭제 취소 | X | **O** | **+NEW** |
| TODO-009 필터: 전체 | X | △ | **+NEW** |
| TODO-010 필터: 진행중 | X | △ | **+NEW** |
| TODO-011 필터: 완료 | X | △ | **+NEW** |
| TODO-012 검색 매칭 | X | X | = |
| TODO-013 검색 결과 없음 | X | X | = |
| TODO-014 검색+필터 조합 | X | X | = |
| TODO-015 빈 제목 유효성 | O | O | = |
| TODO-016 maxLength 50 | △ | △ | = |
| TODO-017 에러 클리어 | X | X | = |
| TODO-018 우선순위 전수 | △ | X | - |
| TODO-019 빈 목록 상태 | △ | **O** | **+UP** |
| TODO-020 수정 모드 UI | X | X | = |
| TODO-021 localStorage 영속성 | O | O | = |

### 커버리지 스코어

| 실험 | 매칭 수 | 커버리지 | 목표(60%) |
|------|---------|---------|----------|
| Pre-Tuned (실험3) | 7.5/21 | **36%** | FAIL |
| **Post-Tuned** | **10/21** | **47.6%** | FAIL (but +11.6%) |

**개선된 항목 (5개):**
- ✅ 삭제 취소 (TODO-008) - 역행 시나리오 신규 커버
- ✅ 필터 (TODO-009/010/011) - 1개 TC로 3개 필터 상태 통합 커버
- ✅ 완료 토글+해제 (TODO-003/004) - 체크/해제 양방향 커버
- ✅ 토스트 메시지 - 추가 시 토스트 1건 커버 (기존 0건)
- ✅ 빈 목록 상태 (TODO-019) - 부분→완전 커버로 승격

**여전히 누락 (6개):**
- ❌ 검색 기능 (3개 TC) - **프롬프트에 "검색: 제목 기준 키워드 검색"이라고 명시했는데도 누락!**
- ❌ 수정 취소 (TODO-006)
- ❌ 에러 메시지 클리어 (TODO-017)
- ❌ 수정 모드 UI (TODO-020) - 수정 시 폼에 기존값 로드 검증
- ❌ 우선순위 전수 (TODO-018) - 이전엔 부분 커버였으나 퇴보
- ❌ Todo 추가 (제목만) (TODO-002) - 이전엔 커버했으나 퇴보

---

## 2. 허위 TC (환각) 분석

| TC# | 내용 | 문제 유형 |
|-----|------|----------|
| TC-14 | 페이지네이션 | **환각** - Todo에 페이지네이션 없음 |
| TC-15 | 네트워크 불안정 | **환각** - localStorage 앱 |
| TC-12 | 공란 제출 경계 | **중복** - TC-2와 동일한 "빈 제목 제출" |

### 환각 비율

| 실험 | 환각 TC | 비율 | 목표(<20%) |
|------|---------|------|-----------|
| Pre-Tuned | 3/15 | **20%** | BORDERLINE |
| **Post-Tuned** | **2/15** | **13.3%** | **PASS ✅** |

**개선점:**
- 네트워크 환각은 여전히 1건 남음 (localStorage 규칙이 적용됐지만 완전히 제거 못함)
- 기존에 있던 "중복 제목 검사", "추가 버튼 비활성화", "로딩 중 비활성화" 환각은 모두 제거됨
- 새로운 환각 "페이지네이션"은 Instructions의 "필수 커버 항목"에서 "있으면" 조건부로 언급했으나 AI가 조건 무시

**중복 TC:**
- TC-12 "공란 제출 시 UI 경계 상태 검증"은 TC-2 "빈 제목으로 추가 시도"와 사실상 동일
- 15개 슬롯 중 1개가 낭비됨

---

## 3. 정확도 분석

### testStep 구체성

| 기준 | Pre-Tuned | Post-Tuned | 변화 |
|------|-----------|-----------|------|
| data-testid 포함 | 0% | **0%** | = (여전히 미포함) |
| 실제 버튼명 사용 | △ | O | + |
| 구체적 입력값 | O | △ | - |
| 스텝 번호 연속성 | O | O | = |

### expectedResult 구체성

| 기준 | Pre-Tuned | Post-Tuned | 변화 |
|------|-----------|-----------|------|
| 정확한 에러 메시지 | △ | △ | = (여전히 일반적) |
| 완료 시 스타일 변화 | X | △ | + ("완료 여부가 화면에 표시") |
| 토스트 메시지 문구 | X | △ | + ("성공 메시지" 일반적 언급) |
| localStorage 동작 | O | O | = |

### precondition 문제
- TC-1의 precondition에 "서버 연동 상태 양호"라고 기술 → **localStorage 앱인데 서버 연동 언급 (환각)**

---

## 4. TC_JUDGE 점수 비교

| 지표 | Pre-Tuned | Post-Tuned | 평가 |
|------|-----------|-----------|------|
| qltyIndex | 4.20 | 4.20 | **동일 - JUDGE가 변화를 감지 못함** |
| trust | 4.19 | 4.24 | +0.05 미미 |
| completeness | 4.2 | 4.1 | **역으로 하락** (실제 커버리지는 +11.6%인데!) |
| clarity | 4.3 | 4.3 | 동일 |
| feasibility | 4.4 | 4.4 | 동일 |

**결론: TC_JUDGE는 여전히 실제 TC 품질 변화를 전혀 반영하지 못함. 캘리브레이션 반드시 필요.**

---

## 5. 튜닝 효과 종합

### 정량 비교

| 메트릭 | Pre-Tuned | Post-Tuned | 변화 |
|--------|-----------|-----------|------|
| 커버리지 | 36% | **47.6%** | **+11.6%** |
| 환각 TC | 20% | **13.3%** | **-6.7%** |
| 중복 TC | 0/15 | 1/15 | +1 |
| 생성 시간 | 40.58s | **22.10s** | **-45%** |
| qltyIndex | 4.20 | 4.20 | 0% |

### Instructions 튜닝 효과 요약

| 추가한 지시 | 효과 | 평가 |
|------------|------|------|
| 역행 시나리오 (Reverse Flow) | 삭제 취소 TC 생성됨 | **효과 있음** |
| 필수 커버 항목 (필터/토스트/빈목록) | 필터+토스트+빈목록 신규 생성 | **효과 있음** |
| 체크박스 양방향 | 체크+해제 모두 포함됨 | **효과 있음** |
| 반환각 (추측 금지) | 환각 20% → 13.3% | **효과 있음** |
| localStorage 조건부 에러 | 네트워크 환각 여전히 1건 | **부분적** |
| data-testid 포함 지시 | 여전히 0% | **효과 없음** |
| 검색 기능 필수 커버 | 여전히 누락 | **효과 없음** |

---

## 6. 다음 튜닝 액션 (Round 3 우선순위)

### 아직 해결 안 된 문제

| 순서 | 문제 | 원인 분석 | 다음 액션 |
|------|------|----------|----------|
| 1 | **검색 기능 완전 누락** | 프롬프트+Instructions 모두 명시했는데도 AI가 무시 → URL 파싱에서 search input이 감지 안 됨? 또는 15개 TC 수 제한으로 우선순위 밀림? | **cnt=20으로 증가** 또는 **TC_GENERATE 프롬프트에 "검색 TC 최소 2개 이상" 강제** |
| 2 | **data-testid 미포함** | URL 파싱(buildUiSpecJson)이 data-testid를 추출 안 함 → Instructions에서 참조해도 데이터 자체가 없음 | **Phase 3-2: URL 파싱 로직 수정** |
| 3 | **수정 취소 누락** | Instructions에 "수정 모드→취소" 언급했으나 생성 안 됨 | 프롬프트에 직접 "수정 취소 TC" 명시 테스트 |
| 4 | **네트워크 환각 잔존** | "localStorage 기반" 프롬프트에 있는데도 1건 남음 | Instructions에 "에러 처리 TC는 최대 1개, localStorage면 0개" 하드 제한 |
| 5 | **중복 TC 발생** | TC-2와 TC-12가 동일 의미 | Instructions에 "의미적 중복 TC 금지" 강화 |
| 6 | **TC_JUDGE 무반응** | 커버리지 +11.6%인데 점수 동일 | **Phase 3-3: JUDGE 프롬프트 재설계** |

---

## 7. 추가 실험: cnt=20 (동일 조건, TC 수만 증가)

### 결과 비교

| 메트릭 | cnt=15 Tuned | cnt=20 Tuned | 변화 |
|--------|-------------|-------------|------|
| 커버리지 | 47.6% (10/21) | **52.4%** (11/21) | +4.8% |
| 환각 TC | 13.3% (2/15) | **15.0%** (3/20) | +1.7% |
| 중복 TC | 1/15 | **2/20** | +1 |
| 생성 시간 | 22.1s | 33.9s | +53% |
| qltyIndex | 4.20 | 4.15 | -0.05 |

### cnt=20 새로 커버된 항목
- ✅ **검색 매칭 (TODO-012)** - 드디어 생성!
- ✅ **검색 결과 없음 (TODO-013)** - 드디어 생성!
- ✅ **수정 취소 (TODO-006)** - 드디어 생성! (TC-5 + TC-14 중복)

### cnt=20에서 사라진 항목 (퇴보!)
- ❌ **필터 기능 (TODO-009/010/011)** - cnt=15에선 커버 → cnt=20에선 완전 누락!
- ❌ maxLength 50 (TODO-016) - cnt=15에선 부분 커버

### cnt=20 환각
- TC-12: 페이지네이션 (Todo에 없음)
- TC-16: "초기화 버튼" (존재하지 않는 기능)
- TC-19: 네트워크 타임아웃 (localStorage 앱)

### cnt=20 중복
- TC-14 ≈ TC-5 (수정 취소 2건)
- TC-20 ≈ TC-10 (localStorage 새로고침 2건)

### 핵심 발견

> **AI 모델의 "Attention Budget" 문제**: 모델이 한정된 주의력 내에서 기능을 trade-off.
> cnt=15에서 필터를 커버하면 검색이 빠지고, cnt=20에서 검색을 커버하면 필터가 빠짐.
> TC 수를 늘려도 **일관성(Consistency)이 보장되지 않음** - 이것이 가장 근본적인 문제.
> **모델 능력 자체의 한계**로, Instructions 튜닝만으로는 60% 커버리지 달성이 어려움.

---

## 8. Round 3 튜닝 방향

### 근본 원인 분석

| 문제 | 원인 | 해결 방향 |
|------|------|----------|
| 일관성 부족 (필터↔검색 trade-off) | 모델 능력 한계 (GPT-5 Nano) | **모델 업그레이드 (gpt-4.1 또는 gpt-4o)** |
| 환각 잔존 (네트워크, 페이지네이션) | "있으면" 조건문을 AI가 무시 | Instructions 환각 방지 더 강화 |
| data-testid 미포함 | URL 파싱이 추출 안 함 | **buildUiSpecJson 코드 수정** |
| TC_JUDGE 무반응 | 평가 기준이 구조/문체에만 집중 | JUDGE 프롬프트 재설계 |

### 다음 액션 우선순위

1. **모델 변경 (HIGH impact, LOW effort)**: TC_GENERATE 모델을 gpt-4.1로 변경 → 이해력/일관성 개선 기대
2. **URL 파싱 개선 (HIGH impact, HIGH effort)**: buildUiSpecJson에 data-testid, button, input 추출 추가
3. **Instructions 2차 미세조정 (MEDIUM)**: 환각 방지 더 강화, "페이지네이션이 없으면 작성하지 마세요" 직접 명시

---

## 부록A: cnt=15 Tuned TC 전체 분류

| TC# | testcaseName | Gold Standard 매핑 | 유형 |
|-----|-------------|-------------------|------|
| 1 | 제목/설명/우선순위 입력 후 추가 | TODO-001 | 정상 |
| 2 | 빈 제목으로 추가 시도 경고 | TODO-015 | 비정상 |
| 3 | 제목 최대 길이 초과 검증 | TODO-016 (△) | 경계값 |
| 4 | 수정 모드 진입 및 저장 | TODO-005 | 정상 |
| 5 | 필터 전체/완료/미완료 전환 | TODO-009/010/011 (△) | UI상태 |
| 6 | 체크박스 선택 및 해제 | TODO-003/004 (△) | 역행 |
| 7 | Todo↔Board 네비게이션 | (Gold Standard 외) | 정상 |
| 8 | localStorage 저장+새로고침 | TODO-021 | 정상 |
| 9 | 삭제 확인 다이얼로그 확인 | TODO-007 | 정상 |
| 10 | 삭제 확인 다이얼로그 취소 | **TODO-008 (NEW!)** | 역행 |
| 11 | 추가 후 토스트 메시지 | (토스트 NEW!) | UI상태 |
| 12 | 공란 제출 경계 검증 | *중복 (TC-2)* | 비정상 |
| 13 | 빈 목록 안내 메시지 | **TODO-019 (UP!)** | UI상태 |
| 14 | 페이지네이션 이동 | *환각* | - |
| 15 | 네트워크 불안정 처리 | *환각* | - |

## 부록B: cnt=20 Tuned TC 전체 분류

| TC# | testcaseName | Gold Standard 매핑 | 유형 |
|-----|-------------|-------------------|------|
| 1 | 제목 입력란 유효값 입력 확인 | TODO-001 (△) | 정상 |
| 2 | 새 Todo 추가 후 목록 반영 | TODO-001 | 정상 |
| 3 | 검색 기능 목록 존재 확인 | **TODO-012 (NEW!)** | UI상태 |
| 4 | 제목 최소 길이 입력 처리 | TODO-015 | 비정상 |
| 5 | 수정 모드 취소 복귀 | **TODO-006 (NEW!)** | 역행 |
| 6 | 빈 목록 안내 메시지 | TODO-019 | UI상태 |
| 7 | 완료/미완료 토글 | TODO-003/004 (△) | 역행 |
| 8 | 삭제 확인 다이얼로그 확인 | TODO-007 | 정상 |
| 9 | 삭제 확인 다이얼로그 취소 | TODO-008 | 역행 |
| 10 | localStorage 데이터 유효성 | TODO-021 | 정상 |
| 11 | 초기 로드 화면 구성 | (유효 - Gold 외) | UI상태 |
| 12 | 페이지네이션 이동 | *환각* | - |
| 13 | 수정 모드 저장 반영 | TODO-005 (+토스트) | 정상 |
| 14 | 수정 모드 취소 되돌림 | *중복 (TC-5)* | 역행 |
| 15 | 검색 결과 없음 UI | **TODO-013 (NEW!)** | UI상태 |
| 16 | 초기화 버튼 데이터 삭제 | *환각* | - |
| 17 | Todo→Board 이동 | (유효 - 네비) | 정상 |
| 18 | DemoApp 링크 메인 이동 | (유효 - 네비) | 정상 |
| 19 | 네트워크 타임아웃 안내 | *환각* | - |
| 20 | 새로고침 데이터 유지 | *중복 (TC-10)* | 정상 |

---

## 전체 실험 진행 종합 비교

| 실험 | Instructions | cnt | 커버리지 | 환각 | 시간 |
|------|-------------|-----|---------|------|------|
| Round1 실험1 (기본) | 원본 | 10 | 24% | 30% | 22s |
| Round1 실험2 (URL) | 원본 | 10 | 24% | 30% | 27s |
| Round1 실험3 (상세) | 원본 | 15 | 36% | 20% | 41s |
| **Round2 cnt=15** | **튜닝** | 15 | **47.6%** | **13.3%** | **22s** |
| **Round2 cnt=20** | **튜닝** | 20 | **52.4%** | **15.0%** | **34s** |

**Instructions 튜닝 효과: 커버리지 +11.6~16.4%, 환각 -5~7%, 시간 -45%**
**다음 목표: 모델 변경으로 60% 커버리지 + 10% 미만 환각 달성**
